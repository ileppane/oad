{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
Decision Page
{% endblock %}

{% block content %}

<body onload="setStartTime()">
  <br><br>

  <section>
    <article id="option_left">

      <div class="gamble_div">
        <p class = "gamble_txt">{{ gain }}</p>

      </div>

    </article>

    <article id="option_right">

      <div class="gamble_div">
        <p class = "gamble_txt">{{ loss }}</p>

      </div>

    </article>


<!-- Overlapping attempt -->
    <div class="overlap">
      <center class="confirm"> X </center>

    </div>

  </section>

  <!-- This is just to push away the debug table, should be commented off in actual deploy -->
  <!-- <div style="height: 600px;">
  </div> -->

</body>

<br><br>
<center class="instruction">Press Up Arrow to accept the gamble. Press Down Arrow to reject the gamble.</center>

<input type="hidden" name="accept" id="id_accept" value='nothing'>
<input type="hidden" name="jsdectime_start" id="id_jsdectime_start" value=0>
<input type="hidden" name="jsdectime_end" id="id_jsdectime_end" value=0>


{% endblock %}

{% block scripts %}

<script>
  // document.documentElement.style.cursor = 'none';
  // This is to hide the cursor, work the same as the CSS method.

  function setStartTime() {
    var d = new Date();
    document.getElementById('id_jsdectime_start').value = d.getTime();
  }

  document.addEventListener('keydown', function(event) {
    var d = new Date();

    if(event.keyCode === 37) {
      document.getElementById('id_accept').value = 1;
      document.getElementById('id_jsdectime_end').value = d.getTime();
      document.getElementById("option_left").style.border = "5px solid white";

      // document.getElementById('form').submit();

      setTimeout(function() {
              document.getElementById('form').submit();
              },
          {{confirm_time}});
    }
    if(event.keyCode === 39) {
      document.getElementById('id_accept').value = 0;
      document.getElementById('id_jsdectime_end').value = d.getTime();
      document.getElementById("option_right").style.border = "5px solid white";

      // document.getElementById('form').submit();

      setTimeout(function() {
              document.getElementById('form').submit();
              },
          {{confirm_time}});
    }

  });

</script>

{% endblock %}

{% block styles %}
<style type="text/css">

  .otree-title {
    font-size: 0;
  }

  article {
    float: left;
    width: 50%;
    background-color: black;
    padding: 20px;
    vertical-align: middle;
    height: 450px;
    box-sizing: border-box;
    border: 5px solid transparent;
  }

  /* Clear floats after the columns */
  section:after {
    content: "";
    display: table;
    clear: both;
  }

  body {
    background-color: black;
  }

  p {
    color: white;
  }

  .instruction {
    color: darkgray;
    font-weight: normal;
    font-size: 20px;
  }

  .gamble_div {
    text-align: center;
    margin: 0 auto;
  }

  .gamble_txt {
    /* font-family: "Times New Roman", Times, serif; */
    font-weight: 300;
    font-size: 120px;
    position: relative;
    top: 110px;
  }

<!-- Overlapping attempt -->
  .overlap {
    position: absolute;
    margin-top: -125px;
    z-index: 2;
  }

  .confirm {
    color: red;
    font-weight: 300;
    font-size: 120px;
  }

</style>
{% endblock %}
